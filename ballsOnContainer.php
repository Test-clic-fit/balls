<?php

$balls = [
    1 => [185070, 198350, 680881, 785092, 294537, 365694, 323999, 121905, 601563, 562324, 585892, 925603, 415865, 846010, 119303, 552402, 253499, 687675, 729300, 724102, 844337, 516785, 836834, 290755, 254432, 642732, 214719, 772117],
    2 => [680335, 26057, 989619, 730887, 153479, 983611, 354433, 175280, 577603, 317123, 531545, 373970, 69888, 841267, 965890, 773591, 852664, 23695, 492909, 640065, 874786, 567738, 753877, 678974, 137421, 940474, 187973, 864883, 182460, 672015, 564706, 862796],
    3 => [71389, 675925, 870760, 74514, 77955, 315242, 207220, 271651, 894481, 98271, 345513, 454672, 396890, 654728, 646831, 937960, 308130],
    4 => [768034, 121813, 57867, 966384, 802694],
    5 => [218340, 650668, 553607, 706173, 398629, 356612, 62190, 610641, 764576, 94676, 67432, 826406, 9020, 415260]
];

$containers = [
    1 => ["space" => 8, "balls" => []],
    2 => ["space" => 8, "balls" => []],
    3 => ["space" => 8, "balls" => []],
    4 => ["space" => 8, "balls" => []],
    5 => ["space" => 7, "balls" => []],
    6 => ["space" => 15, "balls" => []],
    7 => ["space" => 3, "balls" => []],
    8 => ["space" => 12, "balls" => []],
    9 => ["space" => 16, "balls" => []],
    10 => ["space" => 0, "balls" => []],
    11 => ["space" => 21, "balls" => []],
    12 => ["space" => 1, "balls" => []],
    13 => ["space" => 5, "balls" => []],
    14 => ["space" => 11, "balls" => []]
];

foreach ($balls as $coloredBalls) {
    while ($ball = array_pop($coloredBalls)) {
        while (current($containers)["space"] === 0) {
            next($containers);
        }
        $keyContainer = key($containers);
        if ($keyContainer === null) {
            break 2;
        }
        $containers[$keyContainer]["balls"][] = $ball;
        $containers[$keyContainer]["space"]--;
    }
}
var_dump($containers);
